{% extends 'layout.html' %} {% block content %}
<h2 class="mb-4">All Albums ({{ albums_pagination.total }})</h2>

<div class="row row-cols-1 row-cols-md-3 row-cols-lg-5 g-4">
    {% for album in albums_pagination.items %}
    <div class="col">
        <div class="card h-100 shadow-sm">
            <img
                src="{{ album.cover.cover_art_url }}"
                class="card-img-top"
                alt="{{ album.name }} cover"
            />
            <div class="card-body d-flex flex-column">
                <h6 class="card-title">{{ album.name }}</h6>
                <p class="card-subtitle mb-2 text-muted">
                    {{ album.artist.name }}
                </p>
                <p class="card-text small">
                    {{ album.release_date.year }}<br />
                    {{ album.genres.split(',') | first if album.genres else
                    'N/A' }}
                </p>

                <div class="mt-auto d-grid gap-2">
                    <form
                        action="{{ url_for('music.delete_album', mbid=album.mbid) }}"
                        method="POST"
                    >
                        <button
                            type="submit"
                            class="btn btn-outline-danger btn-sm w-100"
                            onclick="return confirm('Are you sure you want to delete this album?');"
                        >
                            Remove
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="col-12">
        <div class="alert alert-info">
            There are no albums in your list yet. Try searching for one!
        </div>
    </div>
    {% endfor %}
</div>

<nav aria-label="Album pages" class="mt-4">
    <ul class="pagination justify-content-center">
        <li
            class="page-item {% if not albums_pagination.has_prev %}disabled{% endif %}"
        >
            <a
                class="page-link"
                href="{{ url_for('music.all_albums', page=albums_pagination.prev_num) }}"
                >Previous</a
            >
        </li>

        {% for page_num in albums_pagination.iter_pages(left_edge=1,
        right_edge=1, left_current=1, right_current=2) %} {% if page_num %}
        <li
            class="page-item {% if page_num == albums_pagination.page %}active{% endif %}"
        >
            <a
                class="page-link"
                href="{{ url_for('music.all_albums', page=page_num) }}"
                >{{ page_num }}</a
            >
        </li>
        {% else %}
        <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %} {% endfor %}

        <li
            class="page-item {% if not albums_pagination.has_next %}disabled{% endif %}"
        >
            <a
                class="page-link"
                href="{{ url_for('music.all_albums', page=albums_pagination.next_num) }}"
                >Next</a
            >
        </li>
    </ul>
</nav>

{% endblock %}
